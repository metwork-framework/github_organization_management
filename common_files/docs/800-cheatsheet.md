# Cheatsheet

{% if REPO != "mfext" %}

## `root` service commands

As `root` unix user:

| Command | Description |
| --- | --- |
| `service metwork start` | start all installed metwork services |
| `service metwork stop` | stop all installed metwork services |
| `service metwork status` | check all installed metwork services |
| `service metwork start {{REPO}}` | start {{REPO}} metwork services |
| `service metwork stop {{REPO}}` | stop {{REPO}} metwork services |
| `service metwork status {{REPO}}` | check {{REPO}} metwork services |

> Note: if you don't have `service` command on your Linux distribution, you can use `/etc/rc.d/init.d/metwork` instead of `service metwork`. For example: `/etc/rc.d/init.d/metwork start` instead of `service metwork start`. If your Linux distribution uses `systemd`component, you can also start metwork services with classic `systemctl` commands.
{% endif %}

{% if REPO != "mfext" %}
## root files or directories

| Path | Description |
| --- | --- |
| `/etc/metwork.config.d/{{REPO}}/config.ini` | override the `{{REPO}}` module configuration at system level (note: the first line of this file must be `[INCLUDE_config.ini]`) |
| `/opt/metwork-{{REPO}}/config/config.ini` | default `{{REPO}}` module configuration (useful to see all configuration options) (**do not edit this file** => use the overriding previous file) |
{% if REPO in ["mfserv", "mfdata", "mfbase"] -%}
| `/etc/metwork.config.d/{{REPO}}/plugins/` | put some `.plugin` files here and they will be installed during `{{REPO}}` service startup, put some `.ini` file fragments here as `{plugin_name}.ini` and they will be used as configuration override for the specified plugin |
{% endif -%}
{% endif %}

## "load environment" commands

As a "not metwork" unix user (useless if you are logged as a "mfxxx" unix user as the "metwork environment" is already loaded):

| Command | Description |
| --- | --- |
| `source /opt/metwork-{{REPO}}/share/interactive_profile` | load the {{REPO}} metwork interactive environment |
| `source /opt/metwork-{{REPO}}/share/profile` | load the {{REPO}} metwork environment (same as above but without fancy stuff about banner, colors and prompt) |
| `/opt/metwork-{{REPO}}/bin/{{REPO}}_wrapper {YOUR_COMMAND}`| execute the given command in the {{REPO}} metwork environment without changing anything to the current environment |

> Note: if you don't have `/opt/metwork-{{REPO}}` symbolic link, use `/opt/metwork-{{REPO}}-{BRANCH}` instead.

## module commands

{% if REPO == "mfext" %}
*(with the `mfext` environment loaded)*
{% else %}
As `{{REPO}}` user:
{% endif %}

| Command | Description |
| --- | --- |
{% if REPO != "mfext" -%}
| `{{REPO}}.start` | start {{REPO}} services |
| `{{REPO}}.stop` | stop {{REPO}} services |
| `{{REPO}}.status` | check {{REPO}} services |
{% endif -%}
| `layers` | list installed layers (loaded layers are prefixed by `(*)`), `layers --help` for more details |
| `layer_load {LAYER_NAME}` | load the given layer (which must be installed), example: `layer_load python2_devtools@mfext` |
| `layer_unload {LAYER_NAME}` | unload the given layer (which must be loaded), example: `layer_unload python2@mfext` |
| `components` | list installed software components (loaded components are prefixed by `(*)`), `components --help` for more details |
| `metwork_debug` | debug the current environment (layers, paths, versions...), useful for debugging or bug reporting |
| `outside {YOUR_COMMAND}`| execute the given command outside the metwork environment without changing anything to the current environment |

{% if REPO in ['mfserv', 'mfbase', 'mfdata'] %}
## plugins management commands

As `{{REPO}}` unix user:

{% raw %}
{{ "cat docs/_plugin_ref_management_commands.md"|shell() }}
{% endraw %}

{% endif %}

{% if REPO in ['mfserv', 'mfbase', 'mfdata'] %}
## plugins development commands and files

### bootstrapping and building

As `{{REPO}}` unix user, inside a plugin directory for `make` commands (you must have a `Makefile` and `config.ini` files inside the current working directory):

{% raw %}
{{ "cat docs/_plugin_ref_dev_commands.md"|shell() }}
{% endraw %}

### interesting files inside the plugin directory

{% raw %}
{{ "cat docs/_plugin_ref_interesting_files.md"|shell() }}
{% endraw %}

> Note: mandatory files are in **bold**, all these files are not created by default (it mainly depends on the template you used) but you can create them afterwards.

{% endif %}
